{"id":"ci-458","title":"Fix beads page imports and types","description":"Fixed barrel exports, added BeadsStats/BeadsFilter types, created useBeadsStats hook, added filter support to useBeads","status":"closed","priority":0,"issue_type":"bug","created_at":"2026-01-10T13:27:32.001017-08:00","created_by":"mayor","updated_at":"2026-01-10T13:27:57.396275-08:00","closed_at":"2026-01-10T13:27:57.396275-08:00","close_reason":"Completed in this session - fixed imports, types, hooks, and nav","dependencies":[{"issue_id":"ci-458","depends_on_id":"ci-785","type":"blocks","created_at":"2026-01-10T13:27:44.944327-08:00","created_by":"mayor"}]}
{"id":"ci-785","title":"Phase 2D: Beads Visibility Dashboard","status":"open","priority":1,"issue_type":"epic","created_at":"2026-01-10T13:27:13.822159-08:00","created_by":"mayor","updated_at":"2026-01-10T13:27:13.822159-08:00"}
{"id":"ci-cg3","title":"Fix convoy beads API - add getBeadsForConvoy method","description":"dispatched_by: mayor\n\nThe convoy beads API route references gastown.getBeadsForConvoy() which doesn't exist in GasTownClient","status":"closed","priority":2,"issue_type":"bug","assignee":"citadel/polecats/slit","created_at":"2026-01-10T13:27:37.27205-08:00","created_by":"mayor","updated_at":"2026-01-10T13:47:07.090916-08:00","closed_at":"2026-01-10T13:47:07.090916-08:00","close_reason":"Added getBeadsForConvoy method to GasTownClient class in src/lib/gastown.ts","dependencies":[{"issue_id":"ci-cg3","depends_on_id":"ci-785","type":"blocks","created_at":"2026-01-10T13:27:45.556452-08:00","created_by":"mayor"}]}
{"id":"ci-d0z","title":"Align Citadel with Gas Town Architecture","description":"IMPLEMENTATION: After Keeper review (ci-f2d), update Citadel to properly integrate with Gas Town.\n\nAREAS TO ADDRESS:\n\n1. CONVOY DISPLAY\n   - Update useConvoys hook to not filter by rig prefix\n   - Or filter by 'convoys tracking ci-* issues'\n   - Update ConvoyList component accordingly\n\n2. WORKER STATE TRACKING  \n   - Understand how Gas Town tracks polecat state\n   - May need to query differently (not via agent beads)\n   - Update WorkerGrid to show accurate state\n\n3. REFINERY HEALTH\n   - Understand Gas Town refinery data model\n   - Update RefineryHealth component to query correctly\n\n4. BEADS INTEGRATION\n   - Verify beads API queries align with Gas Town structure\n   - Test /beads page with real Gas Town data\n\n5. API ROUTES\n   - Review all /api/gastown/* routes\n   - Ensure GasTownClient methods match gt CLI behavior\n\nBLOCKED BY: ci-f2d (Keeper Review)","status":"in_progress","priority":1,"issue_type":"feature","created_at":"2026-01-10T14:15:00.8743-08:00","created_by":"mayor","updated_at":"2026-01-10T14:36:58.789528-08:00","dependencies":[{"issue_id":"ci-d0z","depends_on_id":"ci-f2d","type":"blocks","created_at":"2026-01-10T14:15:07.351588-08:00","created_by":"mayor"}]}
{"id":"ci-f2d","title":"Keeper Review: Citadel-Gas Town Integration Architecture","description":"dispatched_by: mayor\n\nKEEPER REVIEW REQUIRED\n\nCitadel dashboard makes incorrect assumptions about Gas Town's architecture:\n\nCONVOY MISMATCH:\n- Gas Town: Convoys are ALWAYS hq-* (global coordination units)\n- Gas Town: Convoys track issues across rigs (cross-prefix capable)\n- Citadel: Assumes convoys are per-rig, filters by rig prefix\n- Result: Dashboard shows 'No active convoys' when convoys exist\n\nAGENT BEAD MISMATCH:\n- Gas Town: gt sling tries to create ci-* agent beads\n- Gas Town: Agent beads route to hq database (prefix mismatch error)\n- Result: Polecat state tracking broken, all show 'done'\n\nREFINERY HEALTH:\n- Dashboard shows 'Unknown' / 'Idle'\n- May have similar data association issues\n\nQUESTIONS FOR KEEPER:\n1. Should Citadel show ALL convoys or filter by tracked issue prefix?\n2. How should polecat state be tracked if agent beads are at HQ level?\n3. What is the correct way to query refinery health for a rig?\n4. Are there other Gas Town patterns Citadel is misunderstanding?\n\nReference: gt convoy --help shows 'Cross-prefix capable (convoy in hq-* tracks issues in gt-*, bd-*)'","notes":"## KEEPER REVIEW COMPLETE\n\n### CONVOY MISMATCH - ROOT CAUSE\nBug Location: gastown.ts:877-881\ngetRigConvoys() filters by convoy ID prefix (e.g., greenplace/)\nBut convoy IDs are always hq-cv-* (town-level)\nResult: Filter NEVER matches → \"No active convoys\"\n\nAnswer Q1: Show ALL convoys at Town level. For rig filtering, check which ISSUES the convoy tracks, not convoy ID prefix.\n\n### AGENT BEAD MISMATCH\nAnswer Q2: Polecat state should NOT depend on agent beads. Use existing detectJourneyStage() with hook data. \"All show done\" = hooks not being cross-referenced with polecat state.\n\n### REFINERY HEALTH\nAnswer Q3: Query is correct. \"Unknown/Idle\" = fallback when rig.mq undefined despite has_refinery=true. Check if refinery agent is actually running.\n\n### OTHER PATTERNS\nAnswer Q4:\n1. Three hierarchy levels: Town (hq-*) \u003e Rig \u003e Worker\n2. Convoys are town-level coordinators tracking issues ACROSS rigs\n3. Prefix = ownership + routing destination\n\nRECOMMENDED FIX: Show ALL convoys (town-level visibility) or filter by tracked issues, not convoy ID.\n\nVERDICT: Approved for implementation in ci-d0z","status":"closed","priority":1,"issue_type":"task","assignee":"citadel/polecats/rictus","created_at":"2026-01-10T14:14:49.877062-08:00","created_by":"mayor","updated_at":"2026-01-10T14:20:44.601796-08:00","closed_at":"2026-01-10T14:20:44.601796-08:00","close_reason":"Keeper Review complete - architectural mismatches identified and recommendations provided"}
{"id":"ci-nvz","title":"BeadDetail panel UI","description":"dispatched_by: mayor\n\nImplement the BeadDetail side panel component per spec section 4.3. Currently a placeholder page exists at /beads/[id]","status":"closed","priority":1,"issue_type":"feature","assignee":"citadel/polecats/furiosa","created_at":"2026-01-10T13:27:34.483837-08:00","created_by":"mayor","updated_at":"2026-01-10T13:37:12.424671-08:00","closed_at":"2026-01-10T13:37:12.424671-08:00","close_reason":"Implemented BeadDetailPanel component with JourneyTracker integration","dependencies":[{"issue_id":"ci-nvz","depends_on_id":"ci-785","type":"blocks","created_at":"2026-01-10T13:27:45.233569-08:00","created_by":"mayor"}]}
{"id":"ci-tlj","title":"BeadsTree hierarchical view","description":"dispatched_by: mayor\n\nImplement BeadsTree component for Rig → Epic → Issue hierarchy per spec section 4.2","status":"closed","priority":2,"issue_type":"feature","assignee":"citadel/polecats/nux","created_at":"2026-01-10T13:27:35.78405-08:00","created_by":"mayor","updated_at":"2026-01-10T13:47:17.373682-08:00","closed_at":"2026-01-10T13:47:17.373682-08:00","close_reason":"Implemented BeadsTree component with: Rig-\u003eEpic-\u003eIssue hierarchy, collapsible groups with chevron toggle, progress indicators (X/Y done), localStorage persistence for expanded state, and Storybook stories","dependencies":[{"issue_id":"ci-tlj","depends_on_id":"ci-785","type":"blocks","created_at":"2026-01-10T13:27:45.366422-08:00","created_by":"mayor"}]}
{"id":"ci-zqb","title":"Add Beads nav item","description":"Added beads icon to navIcons and Beads tab to navigation","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-10T13:27:33.152425-08:00","created_by":"mayor","updated_at":"2026-01-10T13:27:57.409655-08:00","closed_at":"2026-01-10T13:27:57.409655-08:00","close_reason":"Completed in this session - fixed imports, types, hooks, and nav","dependencies":[{"issue_id":"ci-zqb","depends_on_id":"ci-785","type":"blocks","created_at":"2026-01-10T13:27:45.092081-08:00","created_by":"mayor"}]}
